<!DOCTYPE html>
<html
  lang="en"
  class="bg-purple-50">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Splittypay Starter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: '#faf5ff',
                100: '#f3e8ff',
                200: '#e9d5ff',
                300: '#d8b4fe',
                400: '#c084fc',
                500: '#a855f7',
                600: '#9333ea',
                700: '#7e22ce',
                800: '#6b21a8',
                900: '#581c87',
              },
            },
            fontFamily: {
              poppins: ['Poppins', 'sans-serif'],
            },
          },
        },
      };
    </script>
    <style>
      .dialog-backdrop {
        background-color: rgba(0, 0, 0, 0.5);
        position: fixed;
        inset: 0;
        display: none;
        place-items: center;
      }

      .dialog-backdrop.open {
        display: grid;
      }

      .dialog {
        background: white;
        border-radius: 0.5rem;
        width: 90%;
        max-width: 500px;
        animation: dialog-slide 0.2s ease-out;
      }

      @keyframes dialog-slide {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .clickable {
        cursor: pointer;
        text-decoration: underline;
        text-decoration-style: dotted;
        text-underline-offset: 2px;
      }

      .json-key {
        color: #7e22ce;
        font-weight: 500;
      }

      .action-button {
        padding: 0.375rem;
        border-radius: 0.375rem;
        transition: all 0.2s;
      }

      .action-button:hover {
        background-color: #faf5ff;
      }

      .action-button.delete:hover {
        background-color: #fee2e2;
        color: #dc2626;
      }

      .action-button.pay:hover {
        background-color: #f0fdf4;
        color: #16a34a;
      }

      .actions-cell {
        display: flex;
        gap: 0.5rem;
      }

      .stripe-element {
        padding: 10px 14px;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        background: white;
        box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
      }

      .stripe-element.focused {
        box-shadow: 0 0 0 2px #a855f7;
        border-color: #a855f7;
      }

      .stripe-element.invalid {
        border-color: #dc2626;
      }

      #card-errors {
        color: #dc2626;
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }

      .payment-processing {
        opacity: 0.7;
        pointer-events: none;
      }

      .spinner {
        animation: spin 1s linear infinite;
        margin-right: 0.5rem;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    </style>
    <script type="module" crossorigin src="/assets/index-BReejMCb.js"></script>
  </head>
  <body class="min-h-screen bg-gradient-to-br from-purple-50 to-purple-100">
    <nav class="bg-primary-800 shadow-lg">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center h-16">
          <div class="flex-shrink-0">
            <span class="font-poppins font-semibold text-xl text-white tracking-wide">Splittypay Starter</span>
          </div>
        </div>
      </div>
    </nav>
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-8">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-4xl font-poppins font-bold text-primary-800">Order</h1>
        <button
          id="newOrderBtn"
          class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg shadow-sm transition-colors duration-200 flex items-center gap-2">
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4v16m8-8H4" />
          </svg>
          Nuovo Ordine
        </button>
      </div>

      <div class="overflow-x-auto bg-white rounded-lg shadow-md">
        <table class="min-w-full table-auto">
          <thead class="bg-primary-100">
            <tr>
              <th class="px-6 py-3 text-left text-sm font-semibold text-primary-800">Order ID</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-primary-800">Status</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-primary-800">Name</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-primary-800">Amount</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-primary-800">Created At</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-primary-800">Updated At</th>
              <th class="px-6 py-3 text-left text-sm font-semibold text-primary-800">Azioni</th>
            </tr>
          </thead>
          <tbody id="ordersTableBody">
            <tr>
              <td
                colspan="6"
                class="px-6 py-4 text-center text-primary-600">
                Caricamento dati...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>

    <!-- Dialog per nuovo ordine -->
    <div
      id="newOrderDialog"
      class="dialog-backdrop">
      <div class="dialog p-6 shadow-xl">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-semibold text-primary-800">Crea Nuovo Ordine</h2>
          <button
            id="closeDialog"
            class="text-gray-400 hover:text-gray-600">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <form
          id="newOrderForm"
          class="space-y-4">
          <div>
            <label
              for="name"
              class="block text-sm font-medium text-primary-700 mb-1"
              >Nome</label
            >
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full px-3 py-2 border border-primary-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
              placeholder="Inserisci il nome dell'ordine" />
          </div>

          <div>
            <label
              for="amount"
              class="block text-sm font-medium text-primary-700 mb-1"
              >Importo (€)</label
            >
            <input
              type="number"
              id="amount"
              name="amount"
              required
              min="0"
              step="0.01"
              class="w-full px-3 py-2 border border-primary-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
              placeholder="0.00" />
          </div>

          <div class="flex justify-end gap-3 mt-6">
            <button
              type="button"
              id="cancelBtn"
              class="px-4 py-2 text-sm font-medium text-primary-700 hover:text-primary-800 bg-primary-50 hover:bg-primary-100 rounded-md transition-colors duration-200">
              Annulla
            </button>
            <button
              type="submit"
              class="px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-md transition-colors duration-200">
              Crea Ordine
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Dialog per i dettagli dell'ordine -->
    <div
      id="orderDetailsDialog"
      class="dialog-backdrop">
      <div class="dialog p-6 shadow-xl max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-semibold text-primary-800">Dettagli Ordine</h2>
          <button
            id="closeDetailsDialog"
            class="text-gray-400 hover:text-gray-600">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div
          id="orderDetails"
          class="font-mono text-sm bg-gray-50 p-4 rounded-lg"></div>
      </div>
    </div>

    <!-- Dialog per conferma eliminazione -->
    <div
      id="deleteConfirmDialog"
      class="dialog-backdrop">
      <div class="dialog p-6 shadow-xl">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-semibold text-primary-800">Conferma Eliminazione</h2>
          <button
            id="closeDeleteDialog"
            class="text-gray-400 hover:text-gray-600">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <p class="text-gray-600 mb-6">
          Sei sicuro di voler eliminare questo ordine? Questa azione non può essere annullata.
        </p>

        <div class="flex justify-end gap-3">
          <button
            id="cancelDelete"
            class="px-4 py-2 text-sm font-medium text-primary-700 hover:text-primary-800 bg-primary-50 hover:bg-primary-100 rounded-md transition-colors duration-200">
            Annulla
          </button>
          <button
            id="confirmDelete"
            class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors duration-200">
            Elimina
          </button>
        </div>
      </div>
    </div>

    <!-- Dialog per pagamento con Stripe -->
    <div
      id="paymentConfirmDialog"
      class="dialog-backdrop">
      <div class="dialog p-6 shadow-xl">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-semibold text-primary-800">Inserisci i Dati di Pagamento</h2>
          <button
            id="closePaymentDialog"
            class="text-gray-400 hover:text-gray-600">
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <form
          id="payment-form"
          class="space-y-4">
          <div class="space-y-2">
            <label
              for="card-element"
              class="block text-sm font-medium text-primary-700">
              Carta di Credito
            </label>
            <div
              id="card-element"
              class="stripe-element"></div>
            <div
              id="card-errors"
              role="alert"></div>
          </div>

          <div class="flex justify-end gap-3 mt-6">
            <button
              type="button"
              id="cancelPayment"
              class="px-4 py-2 text-sm font-medium text-primary-700 hover:text-primary-800 bg-primary-50 hover:bg-primary-100 rounded-md transition-colors duration-200">
              Annulla
            </button>
            <button
              type="submit"
              id="confirmPayment"
              class="px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-md transition-colors duration-200 flex items-center"
              disabled>
              <svg
                class="spinner hidden w-4 h-4"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
              </svg>
              <span>Paga Ora</span>
            </button>
          </div>
        </form>
      </div>
    </div>

    <div id="root"></div>

  </body>
</html>
